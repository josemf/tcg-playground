{
    "$id": "https://tennistcg.io/schema/definitions.json",
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "Definitions JSONSchema",

    "$defs": {
        "courtPosition": {
            "type": "string",
            "description": "Player court position, at the 'Baseline' or at the 'Net'.",
            "enum": [
                "Baseline",
                "Net"
            ]
        },
        "hitDirection": {
            "type": "string",
            "description": "Hit direction for the next serve/shotâ€”usually 'FH' or 'BH'.",
            "enum": [
                "FH",
                "BH"
            ]
        }                            
    },
    
    "type": "object",
    "properties": {
        "1d6": {
            "type": "array",
            "items": {
                "type": "integer",
                "minimum": 1,
                "maximum": 6
            },
            "minItems": 1,
            "maxItems": 1
        },
        "2d6": {
            "type": "array",
            "items": {
                "type": "integer",
                "minimum": 1,
                "maximum": 6
            },
            "minItems": 2,
            "maxItems": 2
        },
        "shotCard": {
            "type": "object",

            "required": [
                "name",
                "cost",
                "requirements",
                "winner",
                "error",
                "bonus",
                "actions"                
            ],
            
            "properties": {
                "name": {
                    "type": "string"
                },
                "cost": {
                    "type": "object",
                    "required": ["spSpent", "staminaSpent"],
                    "properties": {
                        "spSpent": {
                            "type": "integer",
                            "minimum": 0
                        },
                        "staminaSpent": {
                            "type": "integer",
                            "minimum": 0
                        }
                    }
                },
                "requirements": {
                    "type": "object",
                    "properties": {
                        "playerPosition": {
                            "$ref": "#/$defs/courtPosition"
                        },
                        "direction": {
                            "$ref": "#/$defs/hitDirection"
                        },
                        "lastTurnShotCard": {
                            "type": "string"
                        }
                    }
                },
                "winner": {
                    "type": "object",
                    "properties": {
                        "conditions": {
                            "type": "array",
                            "items": {
                                "type": [
                                    "integer",
                                    null
                                ]
                            }
                        },
                        "effects": {
                            "type": "array",
                            "items": {
                                "$ref": "https://tennistcg.io/schema/state-effects.json"
                            }                            
                        }
                    }
                },
                "error": {
                    "type": "object",
                    "properties": {
                        "conditions": {
                            "type": "array",
                            "items": {
                                "type": [
                                    "integer",
                                    null
                                ]
                            }
                        },
                        "effects": {
                            "type": "array",
                            "items": {
                                "$ref": "https://tennistcg.io/schema/state-effects.json"
                            }                            
                        }
                    }
                },
                "bonus": {
                    "type": "object",
                    "properties": {
                        "addRSQ": {
                            "type": "number"
                        },
                        "addForehand": {
                            "type": "integer"
                        },
                        "addBackhand": {
                            "type": "integer"
                        }
                    }
                },
                "actions": {
                    "decidePoint": {
                        "type": "string",
                        "enum": ["restartPoint", "winPoint"]
                    },
                    "playerPosition": {
                        "$ref": "#/$defs/courtPosition"
                    },
                    "direction": {
                        "$ref": "#/$defs/hitDirection"
                    }                    
                }
            }
        }
    }
}
